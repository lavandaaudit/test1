<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>PLANET CHAOS · FULL 50</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body{margin:0;padding:0;background:#000;height:100%;font-family:'Courier New',monospace;color:#0af;overflow:hidden}
#hud{position:absolute;top:16px;left:16px;font-size:14px;opacity:.8}
#status{position:absolute;top:42px;left:16px;font-size:12px;color:#0f0;opacity:.7}
#data{position:absolute;top:70px;left:16px;right:16px;bottom:60px;overflow-y:auto;font-size:11px;line-height:1.28;color:#0f0}
#clock{position:absolute;bottom:16px;right:16px;font-size:11px;color:#6cf;opacity:.6;text-align:right}
.category{margin:20px 0 6px;font-size:13px;color:#0af;font-weight:bold}
.main-grid{display:grid;grid-template-columns:1fr 1fr;gap:24px}
.row{white-space:pre;opacity:.9}
.label{color:#6cf}
.val{font-weight:bold}
.val-safe{color:#0f0}
.val-watch{color:#ffd700}
.val-warn{color:#ff8c00}
.val-danger{color:#f00}
</style>
</head>
<body>

<div id="hud">PLANET CHAOS — 50 LIVE INDICATORS</div>
<div id="status">ініціалізація…</div>
<div id="data">завантаження…</div>
<div id="clock">—</div>

<script>
const dataDiv=document.getElementById('data');
const statusDiv=document.getElementById('status');
const clockDiv=document.getElementById('clock');
const proxy='https://corsproxy.io/?';
const start=Date.now();

setInterval(()=>{
  const n=new Date();
  clockDiv.innerHTML=
    n.toLocaleTimeString()+'<br>+'+
    Math.floor((Date.now()-start)/1000)+'s';
},1000);

function cls(v,t){
  v=parseFloat(v); if(isNaN(v)) return 'val-safe';
  if(t.danger&&v>=t.danger) return 'val-danger';
  if(t.warn&&v>=t.warn) return 'val-warn';
  if(t.watch&&v>=t.watch) return 'val-watch';
  return 'val-safe';
}

async function F(u){
  try{
    const r=await fetch(proxy+encodeURIComponent(u));
    return r.ok?await r.json():null;
  }catch{return null}
}

async function run(){
statusDiv.textContent='оновлення…';
let L='',R='',count=0;

/* ───────── СОНЦЕ (9) ───────── */
R+=`<div class="category">СОНЦЕ</div>`;
const sun=await F(
'https://api.open-meteo.com/v1/forecast?latitude=50.45&longitude=30.52&timezone=auto&current='+
'shortwave_radiation,direct_radiation,diffuse_radiation,global_tilted_irradiance,'+
'uv_index,uv_index_clear_sky,is_day,terrestrial_radiation'
);
if(sun?.current){
const c=sun.current;
R+=`<div class="row"><span class="label">Shortwave </span><span class="val">${c.shortwave_radiation}</span></div>`;
R+=`<div class="row"><span class="label">Direct </span><span class="val">${c.direct_radiation}</span></div>`;
R+=`<div class="row"><span class="label">Diffuse </span><span class="val">${c.diffuse_radiation}</span></div>`;
R+=`<div class="row"><span class="label">Tilted </span><span class="val">${c.global_tilted_irradiance}</span></div>`;
R+=`<div class="row"><span class="label">UV </span><span class="val ${cls(c.uv_index,{watch:3,warn:6,danger:8})}">${c.uv_index}</span></div>`;
R+=`<div class="row"><span class="label">UV Clear </span><span class="val">${c.uv_index_clear_sky}</span></div>`;
R+=`<div class="row"><span class="label">Day </span><span class="val">${c.is_day}</span></div>`;
R+=`<div class="row"><span class="label">Terrestrial </span><span class="val">${c.terrestrial_radiation}</span></div>`;
count+=8;
}

/* ───────── ЗЕМЛЯ (14) ───────── */
R+=`<div class="category">ЗЕМЛЯ</div>`;
const earth=await F(
'https://api.open-meteo.com/v1/forecast?latitude=50.45&longitude=30.52&timezone=auto&current='+
'temperature_2m,apparent_temperature,relative_humidity_2m,dew_point_2m,'+
'pressure_msl,surface_pressure,cloud_cover,wind_speed_10m,wind_gusts_10m,'+
'visibility,soil_temperature_0cm,soil_moisture_0_to_1cm,cape,vapour_pressure_deficit'
);
if(earth?.current){
const e=earth.current;
for(const k in e){
  R+=`<div class="row"><span class="label">${k} </span><span class="val">${e[k]}</span></div>`;
  count++;
}
}

dataDiv.innerHTML=`
<div class="main-grid">
  <div>${L}</div>
  <div>${R}</div>
</div>`;
statusDiv.textContent=`активно ${count} / 50+`;
}

run();
setInterval(run,60000);
</script>
</body>
</html>
